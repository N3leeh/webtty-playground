---

- name: Get infos on network
  docker_network_info:
    name: bridge
  register: docker_bridge

- name: Debugging
  debug:
    var: docker_bridge.network
  when: docker_bridge.exists

- name: Run Webtty container
  docker_container:
    name: webtty
    state: started
    ports:
      - 3000:3000
    image: wettyoss/wetty
    command: 
      - wetty
      - --base=/
      - --ssh-host={{ docker_bridge.network.IPAM.Config[0].Gateway }}
  when: docker_bridge.exists
